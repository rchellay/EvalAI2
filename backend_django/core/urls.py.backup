from django.urls import path, include
from rest_framework.routers import DefaultRouter
from .views import (
    StudentViewSet, SubjectViewSet, GroupViewSet, CalendarEventViewSet,
    RubricViewSet, RubricCriterionViewSet, RubricLevelViewSet,
    RubricScoreViewSet, CommentViewSet,
    get_calendar_events, ping, custom_login, custom_register
)

router = DefaultRouter()
router.register(r'students', StudentViewSet, basename='student')
router.register(r'subjects', SubjectViewSet, basename='subject')
router.register(r'groups', GroupViewSet, basename='group')
router.register(r'calendar/events', CalendarEventViewSet, basename='calendarevent')
router.register(r'rubrics', RubricViewSet, basename='rubric')
router.register(r'rubric-criteria', RubricCriterionViewSet, basename='rubriccriterion')
router.register(r'rubric-levels', RubricLevelViewSet, basename='rubriclevel')
router.register(r'rubric-scores', RubricScoreViewSet, basename='rubricscore')
router.register(r'comments', CommentViewSet, basename='comment')

urlpatterns = [
    path('', include(router.urls)),
    path('calendar/', get_calendar_events, name='calendar'),
    path('ping/', ping, name='ping'),
    # Custom auth endpoints for frontend compatibility
    path('auth/login', custom_login, name='custom_login'),
    path('auth/register', custom_register, name='custom_register'),
]
